<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OVA: Sistemas de Ecuaciones Lineales</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Verdes y Blancos Institucionales -->
    <!-- Application Structure Plan: Se diseña un Objeto Virtual de Aprendizaje (OVA) con una disposición de dos columnas. Un menú lateral fijo a la izquierda permite la navegación entre las secciones pedagógicas (Introducción, Objetivos, etc.). El área de contenido principal a la derecha se actualiza dinámicamente con JavaScript para mostrar la sección seleccionada. Esta estructura es ideal para un aprendizaje guiado y organizado, permitiendo al usuario explorar el contenido de forma secuencial o no lineal. -->
    <!-- Visualization & Content Choices: 1. Navegación -> Menú lateral con estado activo (HTML/JS) y ahora con iconos para mejorar la usabilidad. Justificación: Estructura clásica y efectiva para un OVA. 2. Fundamentos Teóricos -> Contenido textual con tarjetas destacadas con iconos. Justificación: Facilita la lectura y resalta conceptos clave. 3. Actividades Prácticas -> Cuestionario interactivo. Justificación: Fomenta la participación activa. 4. Evaluación -> Quiz de opción múltiple con retroalimentación. Justificación: Permite la autoevaluación del aprendizaje. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .sidebar-link {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .sidebar-link.active, .sidebar-link:hover {
            background-color: #e6f4ea;
            color: #166534; /* green-800 */
            border-left-color: #22c55e; /* green-500 */
        }
        .content-pane {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .content-pane.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .quiz-option:hover {
            background-color: #f0fdf4; /* green-50 */
        }
        .quiz-option.selected {
            background-color: #dcfce7; /* green-100 */
            border-color: #22c55e; /* green-500 */
        }
        .type-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .type-card:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        /* Estilos para el popup de imágenes */
        .image-container {
            position: relative;
            overflow: hidden;
        }
        
        .expand-btn {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background-color: rgba(34, 197, 94, 0.8); /* green-500 con transparencia */
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            z-index: 10;
        }
        
        /* En dispositivos móviles, mostrar siempre el botón */
        @media (max-width: 768px) {
            .expand-btn {
                opacity: 0.9;
                width: 44px;
                height: 44px;
                font-size: 22px;
                background-color: rgba(34, 197, 94, 0.9);
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
                animation: pulse 2s infinite;
            }
        }
        
        .image-container:hover .expand-btn {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .image-modal.active {
            display: flex;
            opacity: 1;
        }
        
        .modal-content {
            max-width: 90%;
            max-height: 90%;
            animation: zoomIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }
        
        .modal-content img {
            max-width: 100%;
            max-height: 90vh;
            border: 4px solid white;
            border-radius: 4px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }
        
        /* Optimizaciones para dispositivos móviles */
        @media (max-width: 768px) {
            .modal-content {
                max-width: 90%;
                animation: slideUpFade 0.3s ease-out;
                margin-right: 15px; /* Dar más espacio para el botón de cierre */
            }
            
            .modal-content img {
                border-width: 2px;
            }
            
            .close-modal {
                top: 10px;
                right: 10px;
                width: 36px;
                height: 36px;
                position: absolute;
                z-index: 1010; /* Asegurar que esté por encima de todo */
            }
        }
        
        /* Animación especial para móviles */
        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .close-modal {
            position: absolute;
            top: -20px;
            right: -20px;
            background-color: #ef4444; /* red-500 */
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes zoomIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
<body class="bg-slate-50">

    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-white shadow-lg flex-shrink-0 hidden md:flex md:flex-col">
            <div class="p-4">
                <div style="width: 150px; height: 150px;" class="p-2 mx-auto flex items-center justify-center bg-white rounded-full shadow-lg border-2 border-green-500 transition-shadow duration-300 hover:shadow-green-400">
                    <img src="img/logo.webp" alt="Logo OVA" class="w-5/6 h-5/6 object-contain" loading="lazy">
                </div>
            </div>
            <nav class="mt-6 flex-1">
                <a href="#" class="sidebar-link active flex items-center py-3 px-6 font-medium text-slate-700" data-target="introduccion"><span class="mr-3 text-xl">🚀</span> Introducción</a>
                <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="objetivos"><span class="mr-3 text-xl">🎯</span> Objetivos</a>
                <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="contenido"><span class="mr-3 text-xl">📚</span> Contenido</a>
                <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="actividades"><span class="mr-3 text-xl">✍️</span> Actividades</a>
                <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="evaluacion"><span class="mr-3 text-xl">✔️</span> Evaluación</a>
                <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="recursos"><span class="mr-3 text-xl">📖</span> Recursos</a>
                <a href="#" class="sidebar-link flex items-center py-3 px-6 font-medium text-slate-700" data-target="bibliografia"><span class="mr-3 text-xl">📚</span> Bibliografía</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-4 sm:p-6 md:p-10 bg-gray-50">
            <!-- Mobile Header -->
            <div class="md:hidden mb-6 flex flex-col items-center">
                <div style="width: 100px; height: 100px;" class="p-2 flex items-center justify-center bg-white rounded-full shadow-lg transition-shadow duration-300 hover:shadow-green-400 mb-2">
                    <img src="img/logo.webp" alt="Logo OVA" class="w-5/6 h-5/6 object-contain" loading="lazy">
                </div>
                 <select id="mobile-nav" class="w-full mt-2 p-2 border rounded-md bg-white shadow-sm">
                    <option value="introduccion">🚀 Introducción</option>
                    <option value="objetivos">🎯 Objetivos</option>
                    <option value="contenido">📚 Contenido</option>
                    <option value="actividades">✍️ Actividades Prácticas</option>
                    <option value="evaluacion">✔️ Evaluación</option>
                    <option value="recursos">📖 Recursos</option>
                    <option value="bibliografia">📚 Bibliografía</option>
                </select>
            </div>

            <!-- Introducción -->
            <div id="introduccion" class="content-pane active">
                <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-4">Sistemas de ecuaciones lineales</h2>
                <p class="text-lg text-slate-700 leading-relaxed mb-4">
                    En este curso aprenderemos a resolver <span class="font-bold text-green-700">sistemas de ecuaciones lineales</span>, una herramienta poderosa que nos ayuda a encontrar soluciones a problemas reales en los que hay más de una incógnita. 🤔🔎
                </p>
                <p class="text-lg text-slate-700 leading-relaxed mb-4">
                    Veremos cómo estas ecuaciones se relacionan entre sí y cómo se pueden resolver usando distintos métodos como <span class="font-bold text-green-700">sustitución</span>, <span class="font-bold text-green-700">igualación</span> o el <span class="font-bold text-green-700">método gráfico</span>.
                    Esta habilidad es muy útil para enfrentar situaciones en <span class="font-bold text-green-800">programación web</span>, como la distribución de recursos, el diseño responsivo o la optimización de datos. 💻📊
                </p>
                <p class="text-lg text-slate-700 leading-relaxed">
                    ¡Prepárate para descubrir cómo los <span class="font-bold text-green-800">sistemas de ecuaciones lineales</span> pueden ayudarte a resolver retos de la vida real y la tecnología de una forma divertida y visual! 🚀
                </p>
                <!-- Componente de síntesis de voz para introducción -->
                <div class="speech-controls mb-4 p-3 bg-green-100 rounded-lg flex items-center flex-wrap gap-2 mt-4" data-target="introduccion">
                    <button class="play-btn bg-green-600 hover:bg-green-700 text-white font-medium py-1 px-4 rounded-full flex items-center">
                        <span class="mr-1">▶️</span> Leer
                    </button>
                    <button class="pause-btn bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-1 px-4 rounded-full flex items-center" disabled>
                        <span class="mr-1">⏸️</span> Pausar
                    </button>
                    <button class="stop-btn bg-red-500 hover:bg-red-600 text-white font-medium py-1 px-4 rounded-full flex items-center" disabled>
                        <span class="mr-1">⏹️</span> Detener
                    </button>
                    <div class="flex items-center ml-2">
                        <label for="speech-rate-introduccion" class="text-sm text-green-800 mr-2">Velocidad:</label>
                        <input type="range" class="speech-rate" id="speech-rate-introduccion" min="0.5" max="2" step="0.1" value="1" class="w-24">
                    </div>
                </div>
            </div>

            <!-- Objetivos -->
            <div id="objetivos" class="content-pane">
                <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Objetivos de Aprendizaje</h2>
                <ul class="space-y-4">
                    <li class="flex items-start p-4 bg-white rounded-lg shadow-sm">
                        <span class="text-green-700 mr-3 text-2xl">🔍</span>
                        <span>Comprender qué es un <strong>sistema de ecuaciones lineales</strong> y en qué situaciones de la vida real y la tecnología resultan útiles.</span>
                    </li>
                    <li class="flex items-start p-4 bg-white rounded-lg shadow-sm">
                        <span class="text-green-700 mr-3 text-2xl">📝</span>
                        <span>Identificar y plantear correctamente <strong>sistemas de ecuaciones lineales</strong> a partir de problemas cotidianos o tecnológicos.</span>
                    </li>
                    <li class="flex items-start p-4 bg-white rounded-lg shadow-sm">
                        <span class="text-green-700 mr-3 text-2xl">🧩📊</span>
                        <span>Aplicar los métodos de <strong>sustitución</strong>, <strong>igualación</strong> y <strong>gráfico</strong> para resolver sistemas de ecuaciones lineales, interpretando los resultados obtenidos.</span>
                    </li>
                    <li class="flex items-start p-4 bg-white rounded-lg shadow-sm">
                        <span class="text-green-700 mr-3 text-2xl">💡💻</span>
                        <span>Valorar la importancia de los sistemas de ecuaciones lineales en la resolución de problemas donde intervienen varias incógnitas, especialmente en contextos de programación y optimización.</span>
                    </li>
                    <li class="flex items-start p-4 bg-white rounded-lg shadow-sm">
                        <span class="text-green-700 mr-3 text-2xl">🛠️✨</span>
                        <span>Desarrollar habilidades para analizar y comparar diferentes métodos de resolución, eligiendo el más adecuado según el contexto.</span>
                    </li>
                </ul>
                <!-- Componente de síntesis de voz para objetivos -->
                <div class="speech-controls mb-4 p-3 bg-green-100 rounded-lg flex items-center flex-wrap gap-2 mt-4" data-target="objetivos">
                    <button class="play-btn bg-green-600 hover:bg-green-700 text-white font-medium py-1 px-4 rounded-full flex items-center">
                        <span class="mr-1">▶️</span> Leer
                    </button>
                    <button class="pause-btn bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-1 px-4 rounded-full flex items-center" disabled>
                        <span class="mr-1">⏸️</span> Pausar
                    </button>
                    <button class="stop-btn bg-red-500 hover:bg-red-600 text-white font-medium py-1 px-4 rounded-full flex items-center" disabled>
                        <span class="mr-1">⏹️</span> Detener
                    </button>
                    <div class="flex items-center ml-2">
                        <label for="speech-rate-introduccion" class="text-sm text-green-800 mr-2">Velocidad:</label>
                        <input type="range" class="speech-rate" id="speech-rate-introduccion" min="0.5" max="2" step="0.1" value="1" class="w-24">
                    </div>
                </div>
            </div>

            <!-- Fundamentos Teóricos -->
            <div id="contenido" class="content-pane">
                <!-- Sistema de ecuaciones lineales -->
                <section class="mb-8 p-6 bg-white rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-green-800 mb-4 flex items-center gap-2">¿Qué es un sistema de ecuaciones lineales? <span>🧮</span></h3>
                    <p class="text-lg text-slate-700 leading-relaxed mb-4">
                        Ahora que ya sabemos lo que es una ecuación lineal, podemos ahondar en lo que es un <span class="font-bold text-green-700">sistema de ecuaciones lineales</span> y lo podemos definir como un conjunto de dos o más ecuaciones lineales que comparten variables. Resolver un sistema significa encontrar los valores de esas variables que hacen que <span class="font-bold text-green-700">todas las ecuaciones se cumplan al mismo tiempo</span>.
                    </p>
                    <div class="mt-4 mb-6 p-4 bg-white border border-green-300 rounded-lg shadow-sm flex flex-col items-center">
                        <div class="w-full h-32 sm:h-48 md:h-64 xl:h-80 bg-white rounded flex items-center justify-center overflow-hidden image-container">
                            <img src="img/se_1.webp" alt="Gráfica función polinómica creciente" class="max-w-full max-h-full object-contain" loading="lazy" />
                            <button class="expand-btn" data-img="img/se_1.webp">🔍</button>
                        </div>
                    </div>
                    <div class="bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg mb-4">
                        <span class="font-bold text-green-800">Ejemplo real:</span> <br>
                        <span>Pensemos en un agricultor que tiene un terreno donde cultiva maíz y yuca. Él quiere saber cuántas hectáreas debe sembrar de cada cultivo si:</span>
                        <ul class="list-disc pl-6 my-2">
                            <li>Tiene 10 hectáreas disponibles.</li>
                            <li>Cultivar una hectárea de maíz necesita 2 jornales y una de yuca necesita 1 jornal, y solo tiene 16 jornales disponibles.</li>
                        </ul>
                        <span>Esto se puede modelar como un sistema de ecuaciones, y resolverlo ayuda al agricultor a planear su producción sin pasarse del límite de recursos.</span>
                    </div>
                    <h4 class="font-bold text-green-800 mb-2 mt-6">¿Cómo resolver un sistema de ecuaciones lineales?</h4>
                    <p class="text-lg text-slate-700 leading-relaxed mb-4">
                        Existen varios métodos para resolver un sistema de ecuaciones lineales. Vamos a explicarlos siguiendo el siguiente ejemplo:
                    </p>
                    <div class="bg-white border-l-4 border-green-400 p-4 rounded-r-lg mb-4">
                        <span class="font-bold text-green-800">Ejemplo:</span> <br>
                        En una finca, don Pedro tiene gallinas y patos. Un día, al contar sus aves, se da cuenta de que en total tiene 6 animales entre gallinas (<span class="font-mono">x</span>) y patos (<span class="font-mono">y</span>). Además, nota que tiene 2 gallinas más que patos.<br>
                        <span class="block mt-2">Ahora planteamos el sistema de ecuaciones lineales donde las gallinas son representadas como (<span class="font-mono">x</span>) y los patos como (<span class="font-mono">y</span>):</span>
                        <div class="bg-slate-50 border-l-4 border-green-400 p-4 rounded my-2">
                            <span class="font-mono text-green-800">x (gallinas) + y (patos) = 6</span> &rarr; Tenemos 6 aves en total<br>
                            <span class="font-mono text-green-800">x (gallinas) - y (patos) = 2</span> &rarr; Tenemos 2 gallinas más que patos
                        </div>
                    </div>
                </section>

                <!-- Acordeón de temas -->
                <div class="w-full max-w-8xl mx-auto">
                    <div class="mb-4">
                        <button type="button" class="w-full flex justify-between items-start p-4 bg-green-100 border border-green-300 rounded-t-lg focus:outline-none font-bold text-green-800 text-lg accordion-btn mb-2 text-left" data-target="#panel-metodo-grafico">
                            Método gráfico<span class="ml-2">➕</span>
                        </button>
                    </div>
                        <div id="panel-metodo-grafico" class="accordion-panel hidden bg-white border border-t-0 border-green-300 rounded-b-lg p-4 mb-6">
                            <div class="space-y-8 text-slate-700 leading-relaxed">
                                <div>
                                    <p class="mb-4">
                                        El <span class="font-bold text-green-700">método gráfico</span> consiste en dibujar las ecuaciones en un plano cartesiano y observar dónde se cruzan las rectas. El punto de intersección es la solución. Este método es útil cuando el sistema tiene pocas variables y queremos visualizarlo.
                                    </p>
                                    <div class="mt-4 mb-6 p-4 bg-white border border-green-300 rounded-lg shadow-sm flex flex-col items-center">
                                        <div class="w-full h-32 sm:h-48 md:h-64 xl:h-80 bg-white rounded flex items-center justify-center overflow-hidden image-container">
                                            <img src="img/mg_1.webp" alt="Gráfica método gráfico sistema de ecuaciones" class="max-w-full max-h-full object-contain" loading="lazy" />
                                            <button class="expand-btn" data-img="img/mg_1.webp">🔍</button>
                                        </div>
                                    </div>
                                    <div class="bg-slate-50 border-l-4 border-green-400 p-4 rounded my-2">
                                        <span class="font-mono text-green-800">x + y = 6</span><br>
                                        <span class="font-mono text-green-800">x - y = 2</span>
                                    </div>
                                    <p class="mb-4">Si graficamos estas dos rectas en un plano cartesiano, encontraremos que el punto de intersección es <span class="font-bold text-green-800">(x = 4, y = 2)</span>.</p>
                                    <div class="mt-4 mb-6 p-4 bg-white border border-green-300 rounded-lg shadow-sm flex flex-col items-center">
                                        <div class="w-full h-32 sm:h-48 md:h-64 xl:h-80 bg-white rounded flex items-center justify-center overflow-hidden image-container">
                                            <img src="img/mg_2.webp" alt="Gráfica método gráfico sistema de ecuaciones" class="max-w-full max-h-full object-contain" loading="lazy" />
                                            <button class="expand-btn" data-img="img/mg_2.webp">🔍</button>
                                        </div>
                                    </div>
                                    <div class="bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg mb-4">
                                        <span class="font-bold">Conclusión:</span> La solución del sistema de ecuaciones planteado es <span class="font-bold text-green-800">(x = 4, y = 2)</span>.
                                    </div>
                                </div>
                            </div>
                        </div>
                    <div class="mb-4">
                        <button type="button" class="w-full flex justify-between items-start p-4 bg-green-100 border border-green-300 rounded-t-lg focus:outline-none font-bold text-green-800 text-lg accordion-btn mb-2 text-left" data-target="#panel-metodo-sustitucion">
                            Método de sustitución<span class="ml-2">➕</span>
                        </button>
                    </div>
                        <div id="panel-metodo-sustitucion" class="accordion-panel hidden bg-white border border-t-0 border-green-300 rounded-b-lg p-4 mb-6">
                            <div class="space-y-8 text-slate-700 leading-relaxed">
                                <div>
                                    <p class="mb-4">
                                        El <span class="font-bold text-green-700">método de sustitución</span> consiste en despejar una variable en una de las ecuaciones y reemplazarla en la otra.
                                    </p>
                                    <div class="mt-4 mb-6 p-4 bg-white border border-green-300 rounded-lg shadow-sm flex flex-col items-center">
                                        <div class="w-full h-32 sm:h-48 md:h-64 xl:h-80 bg-white rounded flex items-center justify-center overflow-hidden image-container">
                                            <img src="img/ms_1.webp" alt="Gráfica método gráfico sistema de ecuaciones" class="max-w-full max-h-full object-contain" loading="lazy" />
                                            <button class="expand-btn" data-img="img/ms_1.webp">🔍</button>
                                        </div>
                                    </div>
                                    <div class="bg-slate-50 border-l-4 border-green-400 p-4 rounded my-2">
                                        <span class="font-mono text-green-800">x + y = 6</span><br>
                                        <span class="font-mono text-green-800">x - y = 2</span>
                                    </div>
                                    <p class="mb-4">Ejemplo, encontremos la solución al sistema anterior:</p>
                                    <div class="mt-4 mb-6 p-4 bg-white border border-green-300 rounded-lg shadow-sm flex flex-col items-center">
                                        <div class="w-full h-32 sm:h-48 md:h-64 xl:h-80 bg-white rounded flex items-center justify-center overflow-hidden image-container">
                                            <img src="img/ms_2.webp" alt="Gráfica método gráfico sistema de ecuaciones" class="max-w-full max-h-full object-contain" loading="lazy" />
                                            <button class="expand-btn" data-img="img/ms_2.webp">🔍</button>
                                        </div>
                                    </div>
                                    <div class="bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg mb-4">
                                        <span class="font-bold">Conclusión:</span> La solución para el sistema de ecuaciones planteado es <span class="font-bold text-green-800">(x = 4, y = 2)</span>.
                                    </div>
                                </div>
                            </div>
                        </div>
                    <div class="mb-4">
                        <button type="button" class="w-full flex justify-between items-start p-4 bg-green-100 border border-green-300 rounded-t-lg focus:outline-none font-bold text-green-800 text-lg accordion-btn mb-2 text-left" data-target="#panel-metodo-igualacion">
                            Método de igualación<span class="ml-2">➕</span>
                        </button>
                    </div>
                    <div id="panel-metodo-igualacion" class="accordion-panel hidden bg-white border border-t-0 border-green-300 rounded-b-lg p-4 mb-6">
                        <div class="space-y-8 text-slate-700 leading-relaxed">
                            <div>
                                <p class="mb-4">
                                    El <span class="font-bold text-green-700">método de igualación</span> también está basado en el despeje de variables, pero en este caso se despeja la misma variable en ambas ecuaciones y luego se igualan.
                                </p>
                                <div class="mt-4 mb-6 p-4 bg-white border border-green-300 rounded-lg shadow-sm flex flex-col items-center">
                                    <div class="w-full h-32 sm:h-48 md:h-64 xl:h-80 bg-white rounded flex items-center justify-center overflow-hidden image-container">
                                        <img src="img/mi_1.webp" alt="Gráfica método gráfico sistema de ecuaciones" class="max-w-full max-h-full object-contain" loading="lazy" />
                                        <button class="expand-btn" data-img="img/mi_1.webp">🔍</button>
                                    </div>
                                </div>
                                <div class="bg-slate-50 border-l-4 border-green-400 p-4 rounded my-2">
                                    <span class="font-mono text-green-800">x + y = 6</span><br>
                                    <span class="font-mono text-green-800">x - y = 2</span>
                                </div>
                                <p class="mb-4">Ejemplo, encontremos la solución al sistema anterior:</p>
                                <div class="mt-4 mb-6 p-4 bg-white border border-green-300 rounded-lg shadow-sm flex flex-col items-center">
                                    <div class="w-full h-32 sm:h-48 md:h-64 xl:h-80 bg-white rounded flex items-center justify-center overflow-hidden image-container">
                                        <img src="img/mi_2.webp" alt="Gráfica método gráfico sistema de ecuaciones" class="max-w-full max-h-full object-contain" loading="lazy" />
                                        <button class="expand-btn" data-img="img/mi_2.webp">🔍</button>
                                    </div>
                                </div>
                                <div class="bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg mb-4">
                                    <span class="font-bold">Conclusión:</span> La solución para el sistema de ecuaciones planteado es <span class="font-bold text-green-800">(x = 4, y = 2)</span>.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <button type="button" class="w-full flex justify-between items-start p-4 bg-green-100 border border-green-300 rounded-t-lg focus:outline-none font-bold text-green-800 text-lg accordion-btn mb-2 text-left" data-target="#panel-soluciones">
                            Soluciones de un sistema de ecuaciones lineales<span class="ml-2">➕</span>
                        </button>
                    </div>
                    <div id="panel-soluciones" class="accordion-panel hidden bg-white border border-t-0 border-green-300 rounded-b-lg p-4 mb-6">
                        <div class="space-y-8 text-slate-700 leading-relaxed">
                            <div>
                                <p class="mb-4">Dependiendo de cómo se crucen las rectas, un sistema de ecuaciones lineales puede tener una única solución, infinitas soluciones o ninguna solución. Observa los diferentes casos en la siguiente imagen:</p>
                                <div class="mt-4 mb-6 p-4 bg-white border border-green-300 rounded-lg shadow-sm flex flex-col items-center">
                                    <div class="w-full h-32 sm:h-48 md:h-64 xl:h-80 bg-white rounded flex items-center justify-center overflow-hidden image-container">
                                        <img src="img/sse.webp" alt="Tipos de soluciones de un sistema de ecuaciones lineales" class="max-w-full max-h-full object-contain" loading="lazy" />
                                        <button class="expand-btn" data-img="img/sse.webp">🔍</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actividades Prácticas -->
            <div id="actividades" class="content-pane">
                <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Actividades Prácticas</h2>
                <div class="space-y-8">
                    <!-- Actividad 1: Solución del sistema -->
                    <div class="bg-white border-l-4 border-green-500 rounded-lg shadow-sm p-6">
                        <h3 class="text-xl font-bold text-green-700 mb-2">1. ¿Cuál es la solución del sistema?</h3>
                        <p class="mb-2">Resuelve el siguiente sistema de ecuaciones:<br>
                            x + y = 6<br>
                            x - y = 2<br>
                            Escribe la respuesta para x y para y, separadas por coma (ejemplo: 3,2).</p>
                        <div class="mt-2 mb-2 p-3 bg-green-50 border border-green-200 rounded flex items-center">
                            <input type="text" class="activity-input w-full p-2 border rounded-md bg-white" placeholder="Respuesta..." data-answer="4,2">
                        </div>
                    </div>
                    <!-- Actividad 2: Método gráfico -->
                    <div class="bg-white border-l-4 border-green-500 rounded-lg shadow-sm p-6">
                        <h3 class="text-xl font-bold text-green-700 mb-2">2. ¿Qué representa el punto de intersección de las rectas en el método gráfico?</h3>
                        <p class="mb-2">a) El valor máximo de las variables<br>b) La solución del sistema<br>c) El área bajo la curva<br>d) El número de ecuaciones</p>
                        <div class="mt-2 mb-2 p-3 bg-green-50 border border-green-200 rounded flex items-center">
                            <input type="text" class="activity-input w-full p-2 border rounded-md bg-white" placeholder="Respuesta... (a/b/c/d)" data-answer="b">
                        </div>
                    </div>
                    <!-- Actividad 3: Infinitas soluciones -->
                    <div class="bg-white border-l-4 border-green-500 rounded-lg shadow-sm p-6">
                        <h3 class="text-xl font-bold text-green-700 mb-2">3. Si un sistema de ecuaciones lineales tiene infinitas soluciones, las rectas son:</h3>
                        <p class="mb-2">a) Paralelas<br>b) Coincidentes<br>c) Perpendiculares<br>d) Ninguna de las anteriores</p>
                        <div class="mt-2 mb-2 p-3 bg-green-50 border border-green-200 rounded flex items-center">
                            <input type="text" class="activity-input w-full p-2 border rounded-md bg-white" placeholder="Respuesta... (a/b/c/d)" data-answer="b">
                        </div>
                    </div>
                    <!-- Actividad 4: Método de sustitución -->
                    <div class="bg-white border-l-4 border-green-500 rounded-lg shadow-sm p-6">
                        <h3 class="text-xl font-bold text-green-700 mb-2">4. Usando el método de sustitución, ¿cuál es el valor de y en el sistema x + y = 10, x - y = 2?</h3>
                        <div class="mt-2 mb-2 p-3 bg-green-50 border border-green-200 rounded flex items-center">
                            <input type="text" class="activity-input w-full p-2 border rounded-md bg-white" placeholder="Respuesta..." data-answer="4">
                        </div>
                    </div>
                </div>
                <button id="check-activity-btn" class="mt-6 bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 transition-colors">Verificar respuestas</button>
                <div id="activity-result" class="mt-4 font-medium"></div>

            </div>

            <!-- Evaluación -->
            <div id="evaluacion" class="content-pane">
                <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Evaluación</h2>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <p class="text-slate-600 mb-6">Comprueba lo que has aprendido. Selecciona la respuesta correcta para cada pregunta.</p>
                    <div id="quiz-container"></div>
                    <button id="submit-quiz-btn" class="mt-6 bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 transition-colors">Finalizar evaluación</button>
                    <div id="quiz-result" class="mt-4 text-lg font-bold"></div>
                </div>
            </div>

            <!-- Recursos -->
            <div id="recursos" class="content-pane">
                <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Recursos para profundizar</h2>
                <p class="text-slate-700 leading-relaxed mb-6">Para ampliar tu conocimiento sobre los sistemas de ecuaciones lineales, te recomendamos explorar los siguientes enlaces y documentos:</p>
                <ul class="space-y-4">
                    <!-- Recurso 1 -->
                    <li class="bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-500 flex flex-col sm:flex-row sm:items-center justify-between">
                        <div>
                            <h3 class="font-bold text-green-700">Graficador de sistemas de ecuaciones lineales.</h3>
                            <a href="https://www.geogebra.org/graphing" target="_blank" class="underline text-slate-700 hover:text-green-700">Ir al recurso</a>
                        </div>
                        <div class="mt-4 sm:mt-0 sm:ml-6 flex-shrink-0">
                            <div class="bg-green-50 border border-green-300 rounded flex items-center justify-center" style="width:2cm;height:2cm;">
                                <img src="img/qr_1.webp" alt="Solución ejercicio 1" class="max-w-full max-h-full object-contain" loading="lazy">
                            </div>
                        </div>
                    </li>
                    <!-- Recurso 2 -->
                    <li class="bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-500 flex flex-col sm:flex-row sm:items-center justify-between">
                        <div>
                            <h3 class="font-bold text-green-700">Resolución de sistemas de ecuaciones lineales.</h3>
                            <a href="https://es.khanacademy.org/math/cc-eighth-grade-math/cc-8th-systems-topic/cc-8th-systems-graphically/a/systems-of-equations-with-graphing" target="_blank" class="underline text-slate-700 hover:text-green-700">Ir al recurso</a>
                        </div>
                        <div class="mt-4 sm:mt-0 sm:ml-6 flex-shrink-0">
                            <div class="bg-green-50 border border-green-300 rounded flex items-center justify-center" style="width:2cm;height:2cm;">
                                <img src="img/qr_2.webp" alt="Solución ejercicio 1" class="max-w-full max-h-full object-contain" loading="lazy">
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Bibliografía -->
            <div id="bibliografia" class="content-pane">
                <h2 class="text-2xl sm:text-3xl font-bold text-green-800 mb-6">Bibliografía</h2>
                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-500">
                        <span class="block text-slate-700">
                            Baldor, A. (2008). <i>Álgebra</i>. Grupo Editorial Patria.
                        </span>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-500">
                        <span class="block text-slate-700">
                            Stewart, J. (2015). <i>Cálculo de una variable</i>. Cengage Learning.
                        </span>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-500">
                        <span class="block text-slate-700">
                            Proyecto EDUTEKA. (2021). <i>Matemáticas aplicadas al entorno rural</i>. Fundación Gabriel Piedrahita Uribe.
                        </span>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-500">
                        <span class="block text-slate-700">
                            Khan Academy. (s.f.). Sistemas de ecuaciones lineales.<br>
                            <a href="https://es.khanacademy.org/math/algebra/systems-of-equations" class="text-green-700 underline break-all" target="_blank">https://es.khanacademy.org/math/algebra/systems-of-equations</a>
                        </span>
                    </div>
                </div>
            </div>
            
            <!-- Footer/Credits -->
            <footer class="mt-12 pt-6 border-t-2 border-slate-200 text-center">
                <p class="text-slate-600 font-medium">Creado por:</p>
                <p class="text-green-800 font-bold text-lg">Centro de Innovación en TIC para el apoyo de la Docencia CINTIA</p>
                <p class="text-slate-500 text-sm">Universidad de Córdoba</p>
            </footer>
        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const sidebarLinks = document.querySelectorAll('.sidebar-link');
    const contentPanes = document.querySelectorAll('.content-pane');
    const mobileNav = document.getElementById('mobile-nav');

    function switchPane(targetId) {
        contentPanes.forEach(pane => {
            pane.classList.remove('active');
        });
        const targetPane = document.getElementById(targetId);
        if (targetPane) {
            targetPane.classList.add('active');
        }

        sidebarLinks.forEach(link => {
            link.classList.remove('active');
            if (link.dataset.target === targetId) {
                link.classList.add('active');
            }
        });
        
        if (mobileNav.value !== targetId) {
            mobileNav.value = targetId;
        }
    }

    sidebarLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = e.currentTarget.dataset.target;
            switchPane(targetId);
        });
    });

    mobileNav.addEventListener('change', (e) => {
        switchPane(e.target.value);
    });

    const activityContainer = document.getElementById('activity-container');
    if (activityContainer) {
        activityData.forEach((item, index) => {
            const questionDiv = document.createElement('div');
            questionDiv.className = 'p-4 border rounded-lg';
            
            let optionsHtml = item.options.map(opt => `<option value="${opt}">${opt}</option>`).join('');

            questionDiv.innerHTML = `
                <p class="font-medium text-slate-700 mb-2">${index + 1}. ${item.question}</p>
                <select class="activity-select w-full p-2 border rounded-md bg-white" data-answer="${item.answer}">
                    <option value="">Selecciona una característica...</option>
                    ${optionsHtml}
                </select>
            `;
            activityContainer.appendChild(questionDiv);
        });
    }

    const checkActivityBtn = document.getElementById('check-activity-btn');
    if (checkActivityBtn) {
        checkActivityBtn.addEventListener('click', () => {
            const selects = document.querySelectorAll('.activity-select');
            let correctAnswers = 0;
            selects.forEach(select => {
                if (select.value === select.dataset.answer) {
                    correctAnswers++;
                    select.classList.add('border-green-500');
                    select.classList.remove('border-red-500');
                } else {
                    select.classList.add('border-red-500');
                    select.classList.remove('border-green-500');
                }
            });
            const resultDiv = document.getElementById('activity-result');
            resultDiv.textContent = `Obtuviste ${correctAnswers} de ${activityData.length} respuestas correctas.`;
            resultDiv.className = correctAnswers === activityData.length ? 'mt-4 font-medium text-green-700' : 'mt-4 font-medium text-red-700';
        });
    }

    // --- Evaluación Quiz ---
    const quizData = [
        {
            question: "¿Cuál es la solución del sistema x + y = 8, x - y = 4?",
            options: ["x = 4, y = 4", "x = 6, y = 2", "x = 5, y = 3", "x = 8, y = 0"],
            answer: "x = 6, y = 2"
        },
        {
            question: "¿Qué indica que un sistema de ecuaciones lineales NO tiene solución?",
            options: ["Las rectas se cruzan", "Las rectas son coincidentes", "Las rectas son paralelas", "Las rectas forman un ángulo recto"],
            answer: "Las rectas son paralelas"
        },
        {
            question: "¿Cuál es el primer paso del método de sustitución?",
            options: ["Sumar las ecuaciones", "Despejar una variable en una ecuación", "Multiplicar ambas ecuaciones", "Igualar las variables"],
            answer: "Despejar una variable en una ecuación"
        },
        {
            question: "Si al resolver un sistema por el método gráfico las rectas coinciden, el sistema tiene:",
            options: ["Una única solución", "Infinitas soluciones", "Ninguna solución", "Dos soluciones"],
            answer: "Infinitas soluciones"
        },
        {
            question: "¿Qué método consiste en igualar las expresiones de una misma variable obtenidas de ambas ecuaciones?",
            options: ["Método gráfico", "Método de igualación", "Método de sustitución", "Método de reducción"],
            answer: "Método de igualación"
        }
    ];

    const quizContainer = document.getElementById('quiz-container');
    if(quizContainer) {
        quizData.forEach((q, index) => {
            const questionEl = document.createElement('div');
            questionEl.className = 'mb-6';
            questionEl.innerHTML = `<p class="font-semibold mb-2">${index + 1}. ${q.question}</p>`;
            
            const optionsContainer = document.createElement('div');
            optionsContainer.className = 'space-y-2';
            
            q.options.forEach(option => {
                const optionEl = document.createElement('div');
                optionEl.className = 'quiz-option p-3 border-2 border-slate-200 rounded-lg cursor-pointer';
                optionEl.textContent = option;
                optionEl.addEventListener('click', () => {
                    questionEl.querySelectorAll('.quiz-option').forEach(el => el.classList.remove('selected'));
                    optionEl.classList.add('selected');
                });
                optionsContainer.appendChild(optionEl);
            });
            
            questionEl.appendChild(optionsContainer);
            quizContainer.appendChild(questionEl);
        });
    }

    const submitQuizBtn = document.getElementById('submit-quiz-btn');
    if(submitQuizBtn){
        submitQuizBtn.addEventListener('click', () => {
            let score = 0;
            const questions = quizContainer.querySelectorAll('.mb-6');
            const feedbacks = [
                '¡Correcto! x = 6, y = 2 es la solución del sistema.',
                '¡Bien! Si las rectas son paralelas, el sistema no tiene solución.',
                '¡Exacto! El primer paso es despejar una variable en una ecuación.',
                '¡Muy bien! Si las rectas coinciden, hay infinitas soluciones.',
                '¡Perfecto! Igualar expresiones de la misma variable es el método de igualación.'
            ];
            const wrongFeedbacks = [
                'Incorrecto. Recuerda que x = 6, y = 2 es la solución correcta.',
                'Incorrecto. Un sistema no tiene solución si las rectas son paralelas.',
                'Incorrecto. El primer paso es despejar una variable en una ecuación.',
                'No es correcto. Si las rectas coinciden, hay infinitas soluciones.',
                'Vuelve a intentarlo: igualar expresiones de la misma variable corresponde al método de igualación.'
            ];
            questions.forEach((q, index) => {
                const selectedOption = q.querySelector('.quiz-option.selected');
                let feedbackDiv = q.querySelector('.quiz-feedback');
                if (!feedbackDiv) {
                    feedbackDiv = document.createElement('div');
                    feedbackDiv.className = 'quiz-feedback mt-2 text-sm';
                    q.appendChild(feedbackDiv);
                }
                if (selectedOption && selectedOption.textContent === quizData[index].answer) {
                    score++;
                    feedbackDiv.innerHTML = `<span class='text-green-700 font-semibold'>✔️ ${feedbacks[index]}</span>`;
                } else {
                    feedbackDiv.innerHTML = `<span class='text-red-700 font-semibold'>❌ ${wrongFeedbacks[index]}</span>`;
                }
            });
            const resultEl = document.getElementById('quiz-result');
            resultEl.textContent = `Tu puntuación es: ${score} de ${quizData.length}.`;
            if (score / quizData.length >= 0.7) {
                resultEl.className = 'mt-4 text-lg font-bold text-green-700';
            } else {
                resultEl.className = 'mt-4 text-lg font-bold text-red-700';
            }
        });
    }
});
</script>

<script>
    // JS para verificación de actividades
    document.addEventListener('DOMContentLoaded', function() {
        const checkBtn = document.getElementById('check-activity-btn');
        if (checkBtn) {
            checkBtn.addEventListener('click', function() {
                const inputs = document.querySelectorAll('.activity-input');
                const respuestas = [
                    ['4,2','4, 2','4 ,2','4 , 2'], // Actividad 1: solución del sistema
                    ['b'], // Actividad 2: punto de intersección
                    ['b'], // Actividad 3: infinitas soluciones (coincidentes)
                    ['4']  // Actividad 4: método de sustitución
                ];
                let correctas = 0;
                let feedback = [];
                inputs.forEach((input, idx) => {
                    let val = input.value.trim().toLowerCase();
                    // Normalizar para la respuesta tipo "4,2"
                    if(idx === 0) {
                        val = val.replace(/\s+/g, '');
                    }
                    if (respuestas[idx].some(r => val === r)) {
                        input.classList.remove('border-red-500');
                        input.classList.add('border-green-500');
                        correctas++;
                        feedback.push(`Ejercicio ${idx+1}: ✔️ Correcto`);
                    } else {
                        input.classList.remove('border-green-500');
                        input.classList.add('border-red-500');
                        feedback.push(`Ejercicio ${idx+1}: ❌ Incorrecto`);
                    }
                });
                const resultDiv = document.getElementById('activity-result');
                resultDiv.innerHTML = `<strong>Respuestas correctas: ${correctas} de 4</strong><br>` + feedback.join('<br>');
                resultDiv.className = correctas === 4 ? 'mt-4 font-medium text-green-700' : 'mt-4 font-medium text-red-700';
            });
        }
    });
</script>

<script>
    // JS para acordeón con desplazamiento automático
    document.querySelectorAll('.accordion-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const panel = document.querySelector(this.getAttribute('data-target'));
            const isOpen = panel.classList.contains('block');
            document.querySelectorAll('.accordion-panel').forEach(p => p.classList.add('hidden'));
            document.querySelectorAll('.accordion-panel').forEach(p => p.classList.remove('block'));
            
            if (!isOpen) {
                panel.classList.remove('hidden');
                panel.classList.add('block');
                // Cambiar el símbolo del botón
                this.querySelector('span').textContent = '➖';
                
                // Desplazamiento suave hacia el botón del acordeón desplegado
                setTimeout(() => {
                    this.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100); // Pequeño retraso para asegurar que el panel esté visible
            } else {
                // Cambiar el símbolo del botón
                this.querySelector('span').textContent = '➕';
            }
            
            // Actualizar todos los demás botones
            document.querySelectorAll('.accordion-btn').forEach(otherBtn => {
                if (otherBtn !== this) {
                    otherBtn.querySelector('span').textContent = '➕';
                }
            });
        });
    });
</script>

<script>
    // Modal para ampliar imágenes
    document.addEventListener('DOMContentLoaded', function() {
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const closeBtn = document.getElementById('closeModal');
        const expandBtns = document.querySelectorAll('.expand-btn');
        
        // Abrir modal al hacer clic en el botón de expandir
        expandBtns.forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault(); // Prevenir comportamiento por defecto
                e.stopPropagation(); // Evitar propagación del evento
                
                const imgSrc = this.getAttribute('data-img');
                modalImg.src = imgSrc;
                modal.classList.add('active');
                document.body.style.overflow = 'hidden'; // Evitar scroll en el fondo
                
                // Agregar feedback táctil en dispositivos móviles si está disponible
                if (window.navigator && window.navigator.vibrate) {
                    window.navigator.vibrate(50); // Vibración sutil de 50ms
                }
            });
        });
        
        // Cerrar modal al hacer clic en el botón de cerrar
        closeBtn.addEventListener('click', function() {
            modal.classList.remove('active');
            document.body.style.overflow = ''; // Restaurar scroll
        });
        
        // Cerrar modal al hacer clic fuera de la imagen
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.classList.remove('active');
                document.body.style.overflow = ''; // Restaurar scroll
            }
        });
        
        // Cerrar modal con la tecla ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                modal.classList.remove('active');
                document.body.style.overflow = ''; // Restaurar scroll
            }
        });
    });
</script>

<script>
    // Script para SpeechSynthesis - Versión reutilizable
    document.addEventListener('DOMContentLoaded', function() {
        // Variables para SpeechSynthesis
        const synth = window.speechSynthesis;
        let voices = [];
        let activeReaders = {}; // Almacena los lectores activos por sección
        let paulinaVoice = null; // Variable para almacenar la voz de Paulina
        
        // Función para cargar las voces disponibles
        function loadVoices() {
            voices = synth.getVoices();
            console.log('Voces disponibles:', voices.length);
            
            // Mostrar todas las voces disponibles en la consola
            voices.forEach(voice => {
                console.log(`Voz: ${voice.name}, Idioma: ${voice.lang}, Default: ${voice.default}`);
            });
            
            // Buscar la voz de Paulina (es-MX)
            paulinaVoice = voices.find(voice => voice.name.includes('Paulina'));
            
            // Si no se encuentra Paulina, buscar cualquier voz en español
            if (!paulinaVoice) {
                paulinaVoice = voices.find(voice => voice.lang.startsWith('es'));
                if (paulinaVoice) {
                    console.log('Usando voz en español alternativa:', paulinaVoice.name);
                } else {
                    console.warn('No se encontró ninguna voz en español, usando voz predeterminada');
                    if (voices.length > 0) {
                        paulinaVoice = voices[0];
                        console.log('Usando voz predeterminada:', paulinaVoice.name);
                    }
                }
            } else {
                console.log('Voz Paulina encontrada:', paulinaVoice.name);
            }
        }
        
        // Cargar voces cuando estén disponibles
        if (synth.onvoiceschanged !== undefined) {
            synth.onvoiceschanged = loadVoices;
        }
        
        // Intentar cargar voces inmediatamente (para navegadores que ya las tienen cargadas)
        loadVoices();
        
        // Función para filtrar emojis del texto
        function removeEmojis(text) {
            // Rango de emojis Unicode
            return text.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F700}-\u{1F77F}\u{1F780}-\u{1F7FF}\u{1F800}-\u{1F8FF}\u{1F900}-\u{1F9FF}\u{1FA00}-\u{1FA6F}\u{1FA70}-\u{1FAFF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu, '');
        }
        
        // Función para obtener el texto de una sección sin segmentar
        function getSectionText(sectionId) {
            // Si el sectionId comienza con '#', eliminarlo
            if (sectionId.startsWith('#')) {
                sectionId = sectionId.substring(1);
            }
            
            const section = document.getElementById(sectionId);
            if (!section) {
                console.error('No se encontró la sección:', sectionId);
                return { segments: [], hasSegments: false };
            }
            
            console.log('Obteniendo texto de la sección:', sectionId);
            
            // Primero, clonar la sección para no modificar el DOM original
            const sectionClone = section.cloneNode(true);
            
            // Eliminar los controles de voz del clon para evitar leer los botones
            const speechControls = sectionClone.querySelectorAll('.speech-controls');
            speechControls.forEach(control => {
                control.parentNode.removeChild(control);
            });
            
            // Obtener todo el texto como un solo segmento
            const text = removeEmojis(sectionClone.textContent.trim());
            console.log('Usando texto completo sin segmentar');
            
            return { 
                segments: [{ text: text, type: 'text', element: null }],
                hasSegments: false 
            };
        }
        
        // Función para actualizar el estado de los botones
        function updateButtonStates(controlsElement, isPlaying) {
            const playBtn = controlsElement.querySelector('.play-btn');
            const pauseBtn = controlsElement.querySelector('.pause-btn');
            const stopBtn = controlsElement.querySelector('.stop-btn');
            
            if (playBtn) playBtn.disabled = isPlaying;
            if (pauseBtn) pauseBtn.disabled = !isPlaying;
            if (stopBtn) stopBtn.disabled = !isPlaying;
        }
        
        
        // Configurar cada conjunto de controles de voz
        document.querySelectorAll('.speech-controls').forEach(controls => {
            const sectionId = controls.getAttribute('data-target');
            const playBtn = controls.querySelector('.play-btn');
            const pauseBtn = controls.querySelector('.pause-btn');
            const stopBtn = controls.querySelector('.stop-btn');
            const rateControl = controls.querySelector('.speech-rate');
            
            if (!sectionId || !playBtn || !pauseBtn || !stopBtn || !rateControl) {
                console.error('Faltan elementos necesarios para el control de voz');
                return;
            }
            
            console.log('Configurando controles para sección:', sectionId);
            
            // Función para procesar el siguiente segmento
            function processNextSegment(reader, controls, sectionId) {
                if (reader.currentSegmentIndex >= reader.segments.length) {
                    console.log('Lectura completada para sección:', sectionId);
                    updateButtonStates(controls, false);
                    delete activeReaders[sectionId];
                    return;
                }
                
                const segment = reader.segments[reader.currentSegmentIndex];
                console.log('Procesando segmento:', reader.currentSegmentIndex, 'tipo:', segment.type);
                
                // Configurar el utterance para este segmento
                const utterance = new SpeechSynthesisUtterance(segment.text);
                utterance.lang = 'es-ES';
                utterance.rate = parseFloat(reader.rateValue);
                
                // Establecer la voz de Paulina
                if (paulinaVoice) {
                    utterance.voice = paulinaVoice;
                    console.log('Usando voz Paulina:', paulinaVoice.name);
                } else {
                    console.warn('Voz Paulina no encontrada, usando voz predeterminada');
                }
                
                // Evento cuando termina la lectura del segmento
                utterance.onend = function() {
                    console.log('Segmento finalizado:', reader.currentSegmentIndex);
                    reader.currentSegmentIndex++;
                    // Continuar con el siguiente segmento sin pausa
                    processNextSegment(reader, controls, sectionId);
                };
                
                // Evento de error
                utterance.onerror = function(event) {
                    console.error('Error en la síntesis de voz:', event.error);
                    updateButtonStates(controls, false);
                    delete activeReaders[sectionId];
                };
                
                // Iniciar la lectura del segmento
                console.log('Iniciando síntesis de voz para segmento:', reader.currentSegmentIndex);
                synth.speak(utterance);
                updateButtonStates(controls, true);
            }
            
            // Iniciar la lectura
            playBtn.addEventListener('click', function() {
                console.log('Botón Play presionado para sección:', sectionId);
                const reader = activeReaders[sectionId];
                
                // Si hay un lector activo y está pausado por el usuario, reanudarlo
                if (reader && reader.isPaused) {
                    console.log('Reanudando lectura pausada por usuario');
                    synth.resume();
                    reader.isPaused = false;
                    updateButtonStates(controls, true);
                    return;
                }
                
                // Detener cualquier lectura anterior
                synth.cancel();
                
                // Limpiar lectores activos
                Object.keys(activeReaders).forEach(key => {
                    const readerControls = document.querySelector(`.speech-controls[data-target="${key}"]`);
                    if (readerControls) {
                        updateButtonStates(readerControls, false);
                    }
                });
                activeReaders = {};
                
                // Obtener el texto segmentado a leer
                const sectionContent = getSectionText(sectionId);
                if (!sectionContent || sectionContent.segments.length === 0) {
                    console.error('No se encontró texto para leer en la sección:', sectionId);
                    return;
                }
                
                console.log('Segmentos encontrados:', sectionContent.segments.length, 'con pausas:', sectionContent.hasSegments);
                
                // Crear el lector activo
                const newReader = {
                    segments: sectionContent.segments,
                    currentSegmentIndex: 0,
                    isPaused: false,
                    rateValue: rateControl.value
                };
                
                activeReaders[sectionId] = newReader;
                updateButtonStates(controls, true);
                
                // Iniciar la lectura del primer segmento
                processNextSegment(newReader, controls, sectionId);
            });
            
            // Pausar la lectura
            pauseBtn.addEventListener('click', function() {
                const reader = activeReaders[sectionId];
                if (reader && !reader.isPaused && synth.speaking) {
                    synth.pause();
                    reader.isPaused = true;
                    updateButtonStates(controls, true);
                    playBtn.disabled = false; // Habilitar el botón de reproducir para reanudar
                }
            });
            
            // Detener la lectura
            stopBtn.addEventListener('click', function() {
                if (activeReaders[sectionId]) {
                    synth.cancel();
                    delete activeReaders[sectionId];
                    updateButtonStates(controls, false);
                }
            });
            
            // Cambiar la velocidad de lectura
            rateControl.addEventListener('change', function() {
                const reader = activeReaders[sectionId];
                if (reader) {
                    // Actualizar la velocidad para futuros segmentos
                    reader.rateValue = this.value;
                    
                    // Si está hablando actualmente, reiniciar el segmento actual con la nueva velocidad
                    if (synth.speaking) {
                        // Cancelar la síntesis actual
                        synth.cancel();
                        
                        // Reiniciar desde el segmento actual con la nueva velocidad
                        processNextSegment(reader, controls, sectionId);
                    }
                }
            });
        });
    });
</script>

    <!-- Modal para ampliar imágenes -->    
    <div id="imageModal" class="image-modal">
        <div class="modal-content">
            <img id="modalImage" src="" alt="Imagen ampliada">
            <button class="close-modal" id="closeModal">&times;</button>
        </div>
    </div>

</body>
</html>
